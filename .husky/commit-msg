#!/usr/bin/env sh

# ì»¤ë°‹ ë©”ì‹œì§€ë¥¼ ì €ìž¥í•œ íŒŒì¼ì„ ë³€ìˆ˜ì— ì €ìž¥
message="$(cat "$1")"

# ì •ê·œ í‘œí˜„ì‹ì„ ì‚¬ìš©í•˜ì—¬ ë©”ì‹œì§€ ê²€ì‚¬
requiredPattern="^(ì„œì˜í˜„|ì¡°ì˜ì§„|ê¹€ì˜ˆì§€|ì„ì€ê·œ|ë¼ëŒ€ê²½|ì„œë¯¼ì„)\s?:\s?[0-9]{1,2}ì£¼ì°¨\s?.{0,50}$"

if ! [[ $message =~ $requiredPattern ]]; then
  echo "=========================================================================="
  echo "======================   ðŸš¨ WRONG COMMIT MESSAGE!   ======================"
  echo "=========================================================================="
  echo "== Format should be => [ì´ë¦„]:[ì£¼ì°¨] [ë‚´ìš©]                             =="
  echo "== Allowed Names: ì„œì˜í˜„, ì¡°ì˜ì§„, ê¹€ì˜ˆì§€, ì„ì€ê·œ, ë¼ëŒ€ê²½, ì„œë¯¼ì„         =="
  echo "== EXAMPLE => ì„œì˜í˜„:1ì£¼ì°¨ ë¡œê·¸ì¸ ê¸°ëŠ¥ ì¶”ê°€                          =="
  echo "=========================================================================="
  echo "== Your commit message was =>" $message 
  echo "== For more information, check script in .husky/commit-msg or README.md =="
  echo "=========================================================================="
  exit 1
else
  echo "=========================================================================="
  echo "=======================      COMMIT CREATED!!      ======================="
  echo "=========================================================================="
fi
